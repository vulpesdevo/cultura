{"version":3,"file":"index.mjs","sources":["../../src/baseeditableholder/BaseEditableHolder.vue"],"sourcesContent":["<script>\nimport { isNotEmpty } from '@primeuix/utils';\nimport BaseComponent from '@primevue/core/basecomponent';\n\nexport default {\n    name: 'BaseEditableHolder',\n    extends: BaseComponent,\n    emits: ['update:modelValue', 'value-change'],\n    props: {\n        modelValue: {\n            type: null,\n            default: undefined\n        },\n        defaultValue: {\n            type: null,\n            default: undefined\n        },\n        name: {\n            type: String,\n            default: undefined\n        },\n        invalid: {\n            type: Boolean,\n            default: undefined\n        },\n        disabled: {\n            type: Boolean,\n            default: false\n        },\n        formControl: {\n            type: Object,\n            default: undefined\n        }\n    },\n    inject: {\n        $parentInstance: {\n            default: undefined\n        },\n        $pcForm: {\n            default: undefined\n        },\n        $pcFormField: {\n            default: undefined\n        }\n    },\n    data() {\n        return {\n            d_value: this.defaultValue || this.modelValue\n        };\n    },\n    watch: {\n        modelValue(newValue) {\n            this.d_value = newValue;\n        },\n        defaultValue(newValue) {\n            this.d_value = newValue;\n        },\n        $formName: {\n            immediate: true,\n            handler(newValue) {\n                this.formField = this.$pcForm?.register?.(newValue, this.$formControl) || {};\n            }\n        },\n        $formControl: {\n            immediate: true,\n            handler(newValue) {\n                this.formField = this.$pcForm?.register?.(this.$formName, newValue) || {};\n            }\n        },\n        $formDefaultValue: {\n            immediate: true,\n            handler(newValue) {\n                this.d_value !== newValue && (this.d_value = newValue);\n            }\n        }\n    },\n    formField: {},\n    methods: {\n        writeValue(value, event) {\n            if (this.controlled) {\n                this.d_value = value;\n                this.$emit('update:modelValue', value);\n            }\n\n            this.$emit('value-change', value);\n\n            this.formField.onChange?.({ originalEvent: event, value });\n        }\n    },\n    computed: {\n        $filled() {\n            return isNotEmpty(this.d_value);\n        },\n        $invalid() {\n            return this.invalid ?? this.$pcFormField?.$field?.invalid ?? this.$pcForm?.states?.[this.$formName]?.invalid;\n        },\n        $formName() {\n            return this.name || this.$formControl?.name;\n        },\n        $formControl() {\n            return this.formControl || this.$pcFormField?.formControl;\n        },\n        $formDefaultValue() {\n            return this.d_value ?? this.$pcFormField?.initialValue ?? this.$pcForm?.initialValues?.[this.$formName];\n        },\n        controlled() {\n            return this.$inProps.hasOwnProperty('modelValue') || (!this.$inProps.hasOwnProperty('modelValue') && !this.$inProps.hasOwnProperty('defaultValue'));\n        },\n        // @deprecated use $filled instead\n        filled() {\n            return this.$filled;\n        }\n    }\n};\n</script>\n"],"names":["name","BaseComponent","emits","props","modelValue","type","undefined","defaultValue","String","invalid","Boolean","disabled","formControl","Object","inject","$parentInstance","$pcForm","$pcFormField","data","d_value","watch","newValue","$formName","immediate","handler","_this$$pcForm","_this$$pcForm$registe","formField","register","call","$formControl","_this$$pcForm2","_this$$pcForm2$regist","$formDefaultValue","methods","writeValue","value","event","_this$formField$onCha","_this$formField","controlled","$emit","onChange","originalEvent","computed","$filled","isNotEmpty","$invalid","_ref","_this$invalid","_this$$pcFormField","_this$$pcForm3","$field","states","_this$$formControl","_this$$pcFormField2","_ref2","_this$d_value","_this$$pcFormField3","_this$$pcForm4","initialValue","initialValues","$inProps","hasOwnProperty","filled"],"mappings":"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"}