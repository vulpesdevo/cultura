(function(e,r){typeof exports=="object"&&typeof module<"u"?module.exports=r(require("vue")):typeof define=="function"&&define.amd?define(["vue"],r):(e=typeof globalThis<"u"?globalThis:e||self,e.Vue3OtpInput=r(e.Vue))})(this,function(e){"use strict";const r={style:{display:"flex","align-items":"center"}},D=["type","inputmode","placeholder","disabled"],T={key:0},w=["innerHTML"],F=e.defineComponent({__name:"single-otp-input",props:{inputType:{default:"tel"},inputmode:{default:"numeric"},value:{},separator:{default:""},focus:{type:Boolean,default:!1},inputClasses:{default:""},conditionalClass:{default:""},shouldAutoFocus:{type:Boolean,default:!1},isLastChild:{type:Boolean,default:!1},placeholder:{default:""},isDisabled:{type:Boolean,default:!1}},emits:["on-change","on-keydown","on-paste","on-focus","on-blur"],setup(C,{emit:g}){const c=C,s=g,a=e.ref(c.value||""),l=e.ref(null),o=()=>(a.value=a.value,a.value.length>1&&(a.value=a.value.slice(0,1)),s("on-change",a.value.toString())),m=t=>t>=65&&t<=90,B=t=>t>=48&&t<=57||t>=96&&t<=105,I=t=>{c.isDisabled&&t.preventDefault();const i=t||window.event,d=i.which?i.which:i.keyCode;B(d)||c.inputType==="letter-numeric"&&m(d)||[8,9,13,37,39,46,86].includes(d)?s("on-keydown",t):i.preventDefault()},h=t=>s("on-paste",t),f=()=>(l.value.select(),s("on-focus")),y=()=>s("on-blur"),v=e.computed(()=>["letter-numeric","number"].includes(c.inputType)?"text":c.inputType);return e.watch(()=>c.value,(t,i)=>{t!==i&&(a.value=t)}),e.watch(()=>c.focus,(t,i)=>{i!==t&&l.value&&c.focus&&(l.value.focus(),l.value.select())}),e.onMounted(()=>{l.value&&c.focus&&c.shouldAutoFocus&&(l.value.focus(),l.value.select())}),(t,i)=>(e.openBlock(),e.createElementBlock("div",r,[e.withDirectives(e.createElementVNode("input",{"data-test":"single-input",type:v.value,inputmode:t.inputmode,placeholder:t.placeholder,disabled:t.isDisabled,ref_key:"input",ref:l,min:"0",max:"9",maxlength:1,pattern:"[0-9]","onUpdate:modelValue":i[0]||(i[0]=d=>a.value=d),class:e.normalizeClass([t.inputClasses,t.conditionalClass,{"is-complete":a.value}]),onInput:o,onKeydown:I,onPaste:h,onFocus:f,onBlur:y},null,42,D),[[e.vModelDynamic,a.value]]),!t.isLastChild&&t.separator?(e.openBlock(),e.createElementBlock("span",T,[e.createElementVNode("span",{innerHTML:t.separator},null,8,w)])):e.createCommentVNode("",!0)]))}}),j={style:{display:"flex"},class:"otp-input-container"},E={key:0,autocomplete:"off",name:"hidden",type:"text",style:{display:"none"}},A=8,_=37,L=39,P=46;return e.defineComponent({__name:"vue3-otp-input",props:{value:{default:""},numInputs:{default:4},separator:{default:""},inputClasses:{default:""},conditionalClass:{},inputType:{},inputmode:{default:"text"},shouldAutoFocus:{type:Boolean,default:!1},placeholder:{},isDisabled:{type:Boolean},shouldFocusOrder:{type:Boolean}},emits:["update:value","on-change","on-complete"],setup(C,{expose:g,emit:c}){const s=C,a=c,l=e.ref(0),o=e.ref([]),m=e.ref([]);e.watch(()=>s.value,n=>{if(n.length===s.numInputs||o.value.length===0){const u=n.split("");o.value=u}},{immediate:!0});const B=n=>{l.value=n},I=()=>{l.value=-1},h=()=>o.value.join("").length===s.numInputs?(a("update:value",o.value.join("")),a("on-complete",o.value.join(""))):"Wait until the user enters the required number of characters",f=n=>{l.value=Math.max(Math.min(s.numInputs-1,n),0)},y=()=>{f(l.value+1)},v=()=>{f(l.value-1)},t=n=>{m.value=Object.assign([],o.value),o.value[l.value]=n.toString(),m.value.join("")!==o.value.join("")&&(a("update:value",o.value.join("")),a("on-change",o.value.join("")),h())},i=n=>{n.preventDefault();const u=n.clipboardData.getData("text/plain").slice(0,s.numInputs-l.value).split("");if(s.inputType==="number"&&!u.join("").match(/^\d+$/)||s.inputType==="letter-numeric"&&!u.join("").match(/^\w+$/))return"Invalid pasted data";const p=o.value.slice(0,l.value).concat(u);return p.slice(0,s.numInputs).forEach(function(k,O){o.value[O]=k}),f(p.slice(0,s.numInputs).length),h()},d=n=>{t(n),y()},V=()=>{o.value.length>0&&(a("update:value",""),a("on-change","")),o.value=[],l.value=0},K=n=>{const u=n.split("");u.length===s.numInputs&&(o.value=u,a("update:value",o.value.join("")),a("on-complete",o.value.join("")))},M=(n,u)=>{switch(n.keyCode){case A:n.preventDefault(),t(""),v();break;case P:n.preventDefault(),t("");break;case _:n.preventDefault(),v();break;case L:n.preventDefault(),y();break;default:N(u);break}},N=n=>{s.shouldFocusOrder&&setTimeout(()=>{const u=o.value.join("").length;n-u>=0&&(l.value=u,o.value[n]="")},100)};return g({clearInput:V,fillInput:K}),(n,u)=>(e.openBlock(),e.createElementBlock("div",j,[n.inputType==="password"?(e.openBlock(),e.createElementBlock("input",E)):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.numInputs,($,p)=>{var k,O;return e.openBlock(),e.createBlock(F,{key:p,focus:l.value===p,value:o.value[p],separator:n.separator,"input-type":n.inputType,inputmode:n.inputmode,"input-classes":n.inputClasses,conditionalClass:(k=n.conditionalClass)==null?void 0:k[p],"is-last-child":p===n.numInputs-1,"should-auto-focus":n.shouldAutoFocus,placeholder:(O=n.placeholder)==null?void 0:O[p],"is-disabled":n.isDisabled,onOnChange:d,onOnKeydown:b=>M(b,p),onOnPaste:i,onOnFocus:b=>B(p),onOnBlur:I},null,8,["focus","value","separator","input-type","inputmode","input-classes","conditionalClass","is-last-child","should-auto-focus","placeholder","is-disabled","onOnKeydown","onOnFocus"])}),128))]))}})});
