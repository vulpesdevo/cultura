"use strict";const n=require("vue"),E={style:{display:"flex","align-items":"center"}},j=["type","inputmode","placeholder","disabled"],A={key:0},L=["innerHTML"],P=n.defineComponent({__name:"single-otp-input",props:{inputType:{default:"tel"},inputmode:{default:"numeric"},value:{},separator:{default:""},focus:{type:Boolean,default:!1},inputClasses:{default:""},conditionalClass:{default:""},shouldAutoFocus:{type:Boolean,default:!1},isLastChild:{type:Boolean,default:!1},placeholder:{default:""},isDisabled:{type:Boolean,default:!1}},emits:["on-change","on-keydown","on-paste","on-focus","on-blur"],setup(g,{emit:C}){const c=g,u=C,o=n.ref(c.value||""),a=n.ref(null),l=()=>(o.value=o.value,o.value.length>1&&(o.value=o.value.slice(0,1)),u("on-change",o.value.toString())),f=t=>t>=65&&t<=90,O=t=>t>=48&&t<=57||t>=96&&t<=105,B=t=>{c.isDisabled&&t.preventDefault();const i=t||window.event,r=i.which?i.which:i.keyCode;O(r)||c.inputType==="letter-numeric"&&f(r)||[8,9,13,37,39,46,86].includes(r)?u("on-keydown",t):i.preventDefault()},v=t=>u("on-paste",t),d=()=>(a.value.select(),u("on-focus")),h=()=>u("on-blur"),m=n.computed(()=>["letter-numeric","number"].includes(c.inputType)?"text":c.inputType);return n.watch(()=>c.value,(t,i)=>{t!==i&&(o.value=t)}),n.watch(()=>c.focus,(t,i)=>{i!==t&&a.value&&c.focus&&(a.value.focus(),a.value.select())}),n.onMounted(()=>{a.value&&c.focus&&c.shouldAutoFocus&&(a.value.focus(),a.value.select())}),(t,i)=>(n.openBlock(),n.createElementBlock("div",E,[n.withDirectives(n.createElementVNode("input",{"data-test":"single-input",type:m.value,inputmode:t.inputmode,placeholder:t.placeholder,disabled:t.isDisabled,ref_key:"input",ref:a,min:"0",max:"9",maxlength:1,pattern:"[0-9]","onUpdate:modelValue":i[0]||(i[0]=r=>o.value=r),class:n.normalizeClass([t.inputClasses,t.conditionalClass,{"is-complete":o.value}]),onInput:l,onKeydown:B,onPaste:v,onFocus:d,onBlur:h},null,42,j),[[n.vModelDynamic,o.value]]),!t.isLastChild&&t.separator?(n.openBlock(),n.createElementBlock("span",A,[n.createElementVNode("span",{innerHTML:t.separator},null,8,L)])):n.createCommentVNode("",!0)]))}}),_={style:{display:"flex"},class:"otp-input-container"},K={key:0,autocomplete:"off",name:"hidden",type:"text",style:{display:"none"}},M=8,N=37,$=39,R=46,V=n.defineComponent({__name:"vue3-otp-input",props:{value:{default:""},numInputs:{default:4},separator:{default:""},inputClasses:{default:""},conditionalClass:{},inputType:{},inputmode:{default:"text"},shouldAutoFocus:{type:Boolean,default:!1},placeholder:{},isDisabled:{type:Boolean},shouldFocusOrder:{type:Boolean}},emits:["update:value","on-change","on-complete"],setup(g,{expose:C,emit:c}){const u=g,o=c,a=n.ref(0),l=n.ref([]),f=n.ref([]);n.watch(()=>u.value,e=>{if(e.length===u.numInputs||l.value.length===0){const s=e.split("");l.value=s}},{immediate:!0});const O=e=>{a.value=e},B=()=>{a.value=-1},v=()=>l.value.join("").length===u.numInputs?(o("update:value",l.value.join("")),o("on-complete",l.value.join(""))):"Wait until the user enters the required number of characters",d=e=>{a.value=Math.max(Math.min(u.numInputs-1,e),0)},h=()=>{d(a.value+1)},m=()=>{d(a.value-1)},t=e=>{f.value=Object.assign([],l.value),l.value[a.value]=e.toString(),f.value.join("")!==l.value.join("")&&(o("update:value",l.value.join("")),o("on-change",l.value.join("")),v())},i=e=>{e.preventDefault();const s=e.clipboardData.getData("text/plain").slice(0,u.numInputs-a.value).split("");if(u.inputType==="number"&&!s.join("").match(/^\d+$/)||u.inputType==="letter-numeric"&&!s.join("").match(/^\w+$/))return"Invalid pasted data";const p=l.value.slice(0,a.value).concat(s);return p.slice(0,u.numInputs).forEach(function(y,k){l.value[k]=y}),d(p.slice(0,u.numInputs).length),v()},r=e=>{t(e),h()},I=()=>{l.value.length>0&&(o("update:value",""),o("on-change","")),l.value=[],a.value=0},D=e=>{const s=e.split("");s.length===u.numInputs&&(l.value=s,o("update:value",l.value.join("")),o("on-complete",l.value.join("")))},w=(e,s)=>{switch(e.keyCode){case M:e.preventDefault(),t(""),m();break;case R:e.preventDefault(),t("");break;case N:e.preventDefault(),m();break;case $:e.preventDefault(),h();break;default:T(s);break}},T=e=>{u.shouldFocusOrder&&setTimeout(()=>{const s=l.value.join("").length;e-s>=0&&(a.value=s,l.value[e]="")},100)};return C({clearInput:I,fillInput:D}),(e,s)=>(n.openBlock(),n.createElementBlock("div",_,[e.inputType==="password"?(n.openBlock(),n.createElementBlock("input",K)):n.createCommentVNode("",!0),(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(e.numInputs,(F,p)=>{var y,k;return n.openBlock(),n.createBlock(P,{key:p,focus:a.value===p,value:l.value[p],separator:e.separator,"input-type":e.inputType,inputmode:e.inputmode,"input-classes":e.inputClasses,conditionalClass:(y=e.conditionalClass)==null?void 0:y[p],"is-last-child":p===e.numInputs-1,"should-auto-focus":e.shouldAutoFocus,placeholder:(k=e.placeholder)==null?void 0:k[p],"is-disabled":e.isDisabled,onOnChange:r,onOnKeydown:b=>w(b,p),onOnPaste:i,onOnFocus:b=>O(p),onOnBlur:B},null,8,["focus","value","separator","input-type","inputmode","input-classes","conditionalClass","is-last-child","should-auto-focus","placeholder","is-disabled","onOnKeydown","onOnFocus"])}),128))]))}});module.exports=V;
