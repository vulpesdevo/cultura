{"version":3,"file":"index.mjs","sources":["../../src/ripple/BaseRipple.js","../../src/ripple/Ripple.js"],"sourcesContent":["import BaseDirective from '@primevue/core/basedirective';\nimport RippleStyle from 'primevue/ripple/style';\n\nconst BaseRipple = BaseDirective.extend({\n    style: RippleStyle\n});\n\nexport default BaseRipple;\n","import { addClass, createElement, getAttribute, getHeight, getOffset, getOuterHeight, getOuterWidth, getWidth, removeClass } from '@primeuix/utils/dom';\nimport BaseRipple from './BaseRipple';\n\nconst Ripple = BaseRipple.extend('ripple', {\n    watch: {\n        'config.ripple'(newValue) {\n            if (newValue) {\n                this.createRipple(this.$host);\n                this.bindEvents(this.$host);\n\n                this.$host.setAttribute('data-pd-ripple', true);\n                this.$host.style['overflow'] = 'hidden';\n                this.$host.style['position'] = 'relative';\n            } else {\n                this.remove(this.$host);\n                this.$host.removeAttribute('data-pd-ripple');\n            }\n        }\n    },\n    unmounted(el) {\n        this.remove(el);\n    },\n    timeout: undefined,\n    methods: {\n        bindEvents(el) {\n            el.addEventListener('mousedown', this.onMouseDown.bind(this));\n        },\n        unbindEvents(el) {\n            el.removeEventListener('mousedown', this.onMouseDown.bind(this));\n        },\n        createRipple(el) {\n            const ink = createElement('span', {\n                role: 'presentation',\n                'aria-hidden': true,\n                'data-p-ink': true,\n                'data-p-ink-active': false,\n                class: !this.isUnstyled() && this.cx('root'),\n                onAnimationEnd: this.onAnimationEnd.bind(this),\n                [this.$attrSelector]: '',\n                'p-bind': this.ptm('root')\n            });\n\n            el.appendChild(ink);\n\n            this.$el = ink;\n        },\n        remove(el) {\n            let ink = this.getInk(el);\n\n            if (ink) {\n                this.$host.style['overflow'] = '';\n                this.$host.style['position'] = '';\n\n                this.unbindEvents(el);\n                ink.removeEventListener('animationend', this.onAnimationEnd);\n                ink.remove();\n            }\n        },\n        onMouseDown(event) {\n            let target = event.currentTarget;\n            let ink = this.getInk(target);\n\n            if (!ink || getComputedStyle(ink, null).display === 'none') {\n                return;\n            }\n\n            !this.isUnstyled() && removeClass(ink, 'p-ink-active');\n            ink.setAttribute('data-p-ink-active', 'false');\n\n            if (!getHeight(ink) && !getWidth(ink)) {\n                let d = Math.max(getOuterWidth(target), getOuterHeight(target));\n\n                ink.style.height = d + 'px';\n                ink.style.width = d + 'px';\n            }\n\n            let offset = getOffset(target);\n            let x = event.pageX - offset.left + document.body.scrollTop - getWidth(ink) / 2;\n            let y = event.pageY - offset.top + document.body.scrollLeft - getHeight(ink) / 2;\n\n            ink.style.top = y + 'px';\n            ink.style.left = x + 'px';\n\n            !this.isUnstyled() && addClass(ink, 'p-ink-active');\n            ink.setAttribute('data-p-ink-active', 'true');\n\n            this.timeout = setTimeout(() => {\n                if (ink) {\n                    !this.isUnstyled() && removeClass(ink, 'p-ink-active');\n                    ink.setAttribute('data-p-ink-active', 'false');\n                }\n            }, 401);\n        },\n        onAnimationEnd(event) {\n            if (this.timeout) {\n                clearTimeout(this.timeout);\n            }\n\n            !this.isUnstyled() && removeClass(event.currentTarget, 'p-ink-active');\n            event.currentTarget.setAttribute('data-p-ink-active', 'false');\n        },\n        getInk(el) {\n            return el && el.children ? [...el.children].find((child) => getAttribute(child, 'data-pc-name') === 'ripple') : undefined;\n        }\n    }\n});\n\nexport default Ripple;\n"],"names":["BaseRipple","BaseDirective","extend","style","RippleStyle","Ripple","watch","configRipple","newValue","createRipple","$host","bindEvents","setAttribute","remove","removeAttribute","unmounted","el","timeout","undefined","methods","addEventListener","onMouseDown","bind","unbindEvents","removeEventListener","ink","createElement","_defineProperty","role","isUnstyled","cx","onAnimationEnd","$attrSelector","ptm","appendChild","$el","getInk","event","_this","target","currentTarget","getComputedStyle","display","removeClass","getHeight","getWidth","d","Math","max","getOuterWidth","getOuterHeight","height","width","offset","getOffset","x","pageX","left","document","body","scrollTop","y","pageY","top","scrollLeft","addClass","setTimeout","clearTimeout","children","_toConsumableArray","find","child","getAttribute"],"mappings":"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"}