{"version":3,"file":"index.mjs","sources":["../../src/dynamicdialog/BaseDynamicDialog.vue","../../src/dynamicdialog/DynamicDialog.vue","../../src/dynamicdialog/DynamicDialog.vue?vue&type=template&id=d61378aa&lang.js"],"sourcesContent":["<script>\nimport BaseComponent from '@primevue/core/basecomponent';\nimport DynamicDialogStyle from 'primevue/dynamicdialog/style';\n\nexport default {\n    name: 'BaseDynamicDialog',\n    extends: BaseComponent,\n    props: {},\n    style: DynamicDialogStyle,\n    provide() {\n        return {\n            $pcDynamicDialog: this,\n            $parentInstance: this\n        };\n    }\n};\n</script>\n","<template>\n    <template v-for=\"(instance, key) in instanceMap\" :key=\"key\">\n        <DDialog v-model:visible=\"instance.visible\" :_instance=\"instance\" v-bind=\"instance.options.props\" @hide=\"onDialogHide(instance)\" @after-hide=\"onDialogAfterHide\">\n            <template v-if=\"instance.options.templates && instance.options.templates.header\" #header>\n                <component v-for=\"(header, index) in getTemplateItems(instance.options.templates.header)\" :is=\"header\" :key=\"index + '_header'\" v-bind=\"instance.options.emits\"></component>\n            </template>\n            <component :is=\"instance.content\" v-bind=\"instance.options.emits\"></component>\n            <template v-if=\"instance.options.templates && instance.options.templates.footer\" #footer>\n                <component v-for=\"(footer, index) in getTemplateItems(instance.options.templates.footer)\" :is=\"footer\" :key=\"index + '_footer'\" v-bind=\"instance.options.emits\"></component>\n            </template>\n        </DDialog>\n    </template>\n</template>\n\n<script>\nimport { UniqueComponentId } from '@primevue/core/utils';\nimport Dialog from 'primevue/dialog';\nimport DynamicDialogEventBus from 'primevue/dynamicdialogeventbus';\nimport BaseDynamicDialog from './BaseDynamicDialog.vue';\n\nexport default {\n    name: 'DynamicDialog',\n    extends: BaseDynamicDialog,\n    inheritAttrs: false,\n    data() {\n        return {\n            instanceMap: {}\n        };\n    },\n    openListener: null,\n    closeListener: null,\n    currentInstance: null,\n    mounted() {\n        this.openListener = ({ instance }) => {\n            const key = UniqueComponentId() + '_dynamic_dialog';\n\n            instance.visible = true;\n            instance.key = key;\n            this.instanceMap[key] = instance;\n        };\n\n        this.closeListener = ({ instance, params }) => {\n            const key = instance.key;\n            const currentInstance = this.instanceMap[key];\n\n            if (currentInstance) {\n                currentInstance.visible = false;\n                currentInstance.options.onClose && currentInstance.options.onClose({ data: params, type: 'config-close' });\n\n                this.currentInstance = currentInstance;\n            }\n        };\n\n        DynamicDialogEventBus.on('open', this.openListener);\n        DynamicDialogEventBus.on('close', this.closeListener);\n    },\n    beforeUnmount() {\n        DynamicDialogEventBus.off('open', this.openListener);\n        DynamicDialogEventBus.off('close', this.closeListener);\n    },\n    methods: {\n        onDialogHide(instance) {\n            !this.currentInstance && instance.options.onClose && instance.options.onClose({ type: 'dialog-close' });\n        },\n        onDialogAfterHide() {\n            this.currentInstance && delete this.currentInstance;\n            this.currentInstance = null;\n        },\n        getTemplateItems(template) {\n            return Array.isArray(template) ? template : [template];\n        }\n    },\n    components: {\n        DDialog: Dialog\n    }\n};\n</script>\n","<template>\n    <template v-for=\"(instance, key) in instanceMap\" :key=\"key\">\n        <DDialog v-model:visible=\"instance.visible\" :_instance=\"instance\" v-bind=\"instance.options.props\" @hide=\"onDialogHide(instance)\" @after-hide=\"onDialogAfterHide\">\n            <template v-if=\"instance.options.templates && instance.options.templates.header\" #header>\n                <component v-for=\"(header, index) in getTemplateItems(instance.options.templates.header)\" :is=\"header\" :key=\"index + '_header'\" v-bind=\"instance.options.emits\"></component>\n            </template>\n            <component :is=\"instance.content\" v-bind=\"instance.options.emits\"></component>\n            <template v-if=\"instance.options.templates && instance.options.templates.footer\" #footer>\n                <component v-for=\"(footer, index) in getTemplateItems(instance.options.templates.footer)\" :is=\"footer\" :key=\"index + '_footer'\" v-bind=\"instance.options.emits\"></component>\n            </template>\n        </DDialog>\n    </template>\n</template>\n\n<script>\nimport { UniqueComponentId } from '@primevue/core/utils';\nimport Dialog from 'primevue/dialog';\nimport DynamicDialogEventBus from 'primevue/dynamicdialogeventbus';\nimport BaseDynamicDialog from './BaseDynamicDialog.vue';\n\nexport default {\n    name: 'DynamicDialog',\n    extends: BaseDynamicDialog,\n    inheritAttrs: false,\n    data() {\n        return {\n            instanceMap: {}\n        };\n    },\n    openListener: null,\n    closeListener: null,\n    currentInstance: null,\n    mounted() {\n        this.openListener = ({ instance }) => {\n            const key = UniqueComponentId() + '_dynamic_dialog';\n\n            instance.visible = true;\n            instance.key = key;\n            this.instanceMap[key] = instance;\n        };\n\n        this.closeListener = ({ instance, params }) => {\n            const key = instance.key;\n            const currentInstance = this.instanceMap[key];\n\n            if (currentInstance) {\n                currentInstance.visible = false;\n                currentInstance.options.onClose && currentInstance.options.onClose({ data: params, type: 'config-close' });\n\n                this.currentInstance = currentInstance;\n            }\n        };\n\n        DynamicDialogEventBus.on('open', this.openListener);\n        DynamicDialogEventBus.on('close', this.closeListener);\n    },\n    beforeUnmount() {\n        DynamicDialogEventBus.off('open', this.openListener);\n        DynamicDialogEventBus.off('close', this.closeListener);\n    },\n    methods: {\n        onDialogHide(instance) {\n            !this.currentInstance && instance.options.onClose && instance.options.onClose({ type: 'dialog-close' });\n        },\n        onDialogAfterHide() {\n            this.currentInstance && delete this.currentInstance;\n            this.currentInstance = null;\n        },\n        getTemplateItems(template) {\n            return Array.isArray(template) ? template : [template];\n        }\n    },\n    components: {\n        DDialog: Dialog\n    }\n};\n</script>\n"],"names":["name","BaseComponent","props","style","DynamicDialogStyle","provide","$pcDynamicDialog","$parentInstance","BaseDynamicDialog","inheritAttrs","data","instanceMap","openListener","closeListener","currentInstance","mounted","_this","_ref","instance","key","UniqueComponentId","visible","_ref2","params","options","onClose","type","DynamicDialogEventBus","on","beforeUnmount","off","methods","onDialogHide","onDialogAfterHide","getTemplateItems","template","Array","isArray","components","DDialog","Dialog","_openBlock","_createElementBlock","_Fragment","_renderList","$data","_createBlock","_component_DDialog","_mergeProps","onUpdateVisible","$event","_instance","onHide","$options","onAfterHide","_resolveDynamicComponent","content","ref_for","emits","templates","header","index","footer"],"mappings":"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"}